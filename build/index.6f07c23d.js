require("regenerator-runtime");var e,t=(e=require("axios"))&&e.__esModule?e.default:e;require("core-js/modules/es.math.hypot.js");const r=document.querySelector("form#register-form"),o=document.querySelector("form#login-form"),n=document.querySelector(".section__chart"),a=document.querySelector(".section__footer"),c=document.querySelector(".section__lander");let i={id:null,username:null,carNumber:null,password:null,isLoggedIn:!1};const s=function(...e){return e.some((e=>0===e.length))},l=function(e){[...e.querySelectorAll(".form__input")].forEach((e=>e.value=""))},u=async function(e){const o=r.querySelector('.form__input[name="username"]').value,n=r.querySelector('.form__input[name="password"]').value,a=r.querySelector('.form__input[name="carNumber"]').value;if(n!==r.querySelector('.form__input[name="passwordSecond"]').value)return void f("Passwords don't match, Check it once  again");if(s(o,n))return void f("Empty fields");const c={username:o,password:n,carNumber:a};t.post("/register",c).then((e=>{e.data?(A(),f(`Car number ${e.data.carNumber} registered successfully with username: ${e.data.username}`),l(r)):f("Username already registered, use a different one.")})).catch((e=>{f(e.message)}))},d=async function(e){const r=o.querySelector('.form__input[name="username"]').value,n=o.querySelector('.form__input[name="password"]').value,a={username:r,password:n};s(r,n)?f("Empty fields"):t.post("/login",a).then((e=>{e.data&&""!==e.data?(A(),f(`Logged in as ${e.data.username}!`),m(e.data),y(),l(o)):f("Invalid credentials")})).catch((e=>{console.log(e),f(`Error logging in! Try again after checking the credentials :)\n${e.message}`)}))},m=function(e){i={id:e._id,username:e.username,password:e.password,carNumber:e.carNumber,isLoggedin:!0}},y=function(){const e=`\n\tWelcome ${i.username}!\n\t`;c.querySelector(".right").innerHTML=e,n.style.display="block",a.style.paddingTop="4rem",a.style.marginTop="0",n.scrollIntoView()},f=function(e){const t=`\n\t<div class="alert">\n\t\t<div class="alert__message">\n\t\t${e}\n\t\t</div>\n\t\t<div class="alert__close">X</div>\n\t</div>\n\t`;document.querySelector("body").insertAdjacentHTML("beforeend",t);const r=document.querySelector(".alert"),o=function(){r.style.transform="translateX(-50%) translateY(10rem)",setTimeout((()=>{r.style.display="none",r.remove(),[...document.querySelectorAll(".alert")].forEach((e=>e.remove()))}),250)};r.querySelector(".alert__close").addEventListener("click",o),setTimeout(o,4e3)};r.addEventListener("submit",(e=>{e.preventDefault(),u(e)})),o.addEventListener("submit",(e=>{e.preventDefault(),d(e)}));let g,p={};const _=function(){const e=document.getElementById("myChart"),t=[p.currentCharge,p.voltage,p.energy,p.maxcurrentenergy,p.maxdesignenergy];return new Chart(e,{type:"bar",data:{labels:["Charge","Voltage","Energy","Max-Current Energy","Max-Design Energy"],datasets:[{label:"Units",data:t,backgroundColor:["rgba(249, 65, 68, 0.5)","rgba(243, 114, 44, 0.5)","rgba(248, 150, 30, 0.5)","rgba(249, 199, 79, 0.5)","rgba(144, 190, 109, 0.5)","rgba(67, 170, 139, 0.5)","rgba(87, 117, 144, 0.5)"],borderColor:["#f94144","#f3722c","#f8961e","#f9c74f","#90be6d","#43aa8b","#577590"],borderWidth:1,borderRadius:3}]},options:{scales:{y:{beginAtZero:!0}},layout:{padding:20},animation:{easing:"easeOutBounce"},font:{size:26},plugins:{legend:{display:!1},tooltip:{displayColors:!0,backgroundColor:"#c3ecec",bodyColor:"#6930c3",titleColor:"#7400b8",titleMarginBottom:10,padding:"10",titleFont:{family:"Lato",size:16},bodyFont:{family:"Lato",size:14},animation:{easing:"easeInOutCirc"},bodyAlign:"right"}}}})};document.addEventListener("DOMContentLoaded",(async function(){try{await t.get("/values").then((e=>{console.log(e.data),p=e.data,p?g=_():f("There was no data received from the backend! ;(")}))}catch(e){console.log(e),f("There was an error while retrieving the values of the chart")}}));const h=document.querySelector(".section__lander"),v=document.querySelector(".section__features"),b=document.querySelector(".section__map"),q=document.querySelector(".section__chart"),S=(document.querySelector(".section__footer"),document.querySelector(".nav__item#features")),w=document.querySelector(".nav__item#map"),E=document.querySelector(".nav__item#chart"),k=document.querySelector(".footer__link#home"),C=document.querySelector(".btn-login"),T=document.querySelector(".footer__link#register"),M=document.querySelector("#login-overlay"),x=document.querySelector("#register-overlay"),A=function(){[M,x].forEach((e=>e.style.display="none"))};exports.hideBoth=A;const H=function(e){e.addEventListener("click",(()=>{const t=[...document.querySelectorAll(".form__input.input-password")];" visibility_off "===e.innerHTML?e.innerHTML=" visibility ":e.innerHTML=" visibility_off ",t.forEach((e=>{"password"===e.type?e.type="text":e.type="password"}))}))};!function(){var e;null===(e=navigator.geolocation)||void 0===e||e.getCurrentPosition(function({coords:e}){const{latitude:t,longitude:r}=e,o=L.map("mapid").setView([t,r],13);L.tileLayer("https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(o),L.marker([t,r]).addTo(o).bindPopup("This is your current location right now.").openPopup(),L.circle([t,r],{color:"#4ea8de",fillColor:"#64dfdf",fillOpacity:.5,radius:500}).addTo(o)}.bind(this),(()=>{alert("We weren't able to access your current location")}),{enableHighAccuracy:!0})}(),function(){const e=function(e,t){e.addEventListener("click",(()=>{t.scrollIntoView()}))};e(S,v),e(w,b),e(E,q),e(k,h)}(),[...document.querySelectorAll("#show-password")].forEach((e=>H(e))),C.addEventListener("click",(()=>{M.style.display="flex"})),T.addEventListener("click",(()=>{x.style.display="flex"})),[...document.querySelectorAll(".close-button")].forEach((e=>e.addEventListener("click",A))),[...document.querySelectorAll(".overlay")].forEach((e=>e.addEventListener("click",A))),window.addEventListener("keyup",(e=>{"Escape"==e.key&&A()}));
//# sourceMappingURL=index.6f07c23d.js.map
