require("regenerator-runtime");var e,t=(e=require("axios"))&&e.__esModule?e.default:e,{map:r,tileLayer:o,marker:n,circle:a}=require("leaflet");require("core-js/modules/es.math.hypot.js");const c=document.querySelector("form#register-form"),i=document.querySelector("form#login-form"),s=document.querySelector(".section__chart"),l=document.querySelector(".section__footer"),u=document.querySelector(".section__lander");let d={id:null,username:null,carNumber:null,password:null,isLoggedIn:!1};const m=function(...e){return e.some((e=>0===e.length))},y=function(e){[...e.querySelectorAll(".form__input")].forEach((e=>e.value=""))},f=async function(e){const r=c.querySelector('.form__input[name="username"]').value,o=c.querySelector('.form__input[name="password"]').value,n=c.querySelector('.form__input[name="carNumber"]').value;if(o!==c.querySelector('.form__input[name="passwordSecond"]').value)return void h("Passwords don't match, Check it once  again");if(m(r,o))return void h("Empty fields");const a={username:r,password:o,carNumber:n};t.post("/register",a).then((e=>{e.data?(N(),h(`Car number ${e.data.carNumber} registered successfully with username: ${e.data.username}`),y(c)):h("Username already registered, use a different one.")})).catch((e=>{h(e.message)}))},g=async function(e){const r=i.querySelector('.form__input[name="username"]').value,o=i.querySelector('.form__input[name="password"]').value,n={username:r,password:o};m(r,o)?h("Empty fields"):t.post("/login",n).then((e=>{e.data&&""!==e.data?(N(),h(`Logged in as ${e.data.username}!`),p(e.data),_(),y(i)):h("Invalid credentials")})).catch((e=>{console.log(e),h(`Error logging in! Try again after checking the credentials :)\n${e.message}`)}))},p=function(e){d={id:e._id,username:e.username,password:e.password,carNumber:e.carNumber,isLoggedin:!0}},_=function(){const e=`\n\tWelcome ${d.username}!\n\t`;u.querySelector(".right").innerHTML=e,s.style.display="block",l.style.paddingTop="4rem",l.style.marginTop="0",s.scrollIntoView()},h=function(e){const t=`\n\t<div class="alert">\n\t\t<div class="alert__message">\n\t\t${e}\n\t\t</div>\n\t\t<div class="alert__close">X</div>\n\t</div>\n\t`;document.querySelector("body").insertAdjacentHTML("beforeend",t);const r=document.querySelector(".alert"),o=function(){r.style.transform="translateX(-50%) translateY(10rem)",setTimeout((()=>{r.style.display="none",r.remove(),[...document.querySelectorAll(".alert")].forEach((e=>e.remove()))}),250)};r.querySelector(".alert__close").addEventListener("click",o),setTimeout(o,4e3)};c.addEventListener("submit",(e=>{e.preventDefault(),f(e)})),i.addEventListener("submit",(e=>{e.preventDefault(),g(e)}));let v,b={};const q=function(){const e=document.getElementById("myChart"),t=[b.currentCharge,b.voltage,b.energy,b.maxcurrentenergy,b.maxdesignenergy];return new Chart(e,{type:"bar",data:{labels:["Charge","Voltage","Energy","Max-Current Energy","Max-Design Energy"],datasets:[{label:"Units",data:t,backgroundColor:["rgba(249, 65, 68, 0.5)","rgba(243, 114, 44, 0.5)","rgba(248, 150, 30, 0.5)","rgba(249, 199, 79, 0.5)","rgba(144, 190, 109, 0.5)","rgba(67, 170, 139, 0.5)","rgba(87, 117, 144, 0.5)"],borderColor:["#f94144","#f3722c","#f8961e","#f9c74f","#90be6d","#43aa8b","#577590"],borderWidth:1,borderRadius:3}]},options:{scales:{y:{beginAtZero:!0}},layout:{padding:20},animation:{easing:"easeOutBounce"},font:{size:26},plugins:{legend:{display:!1},tooltip:{displayColors:!0,backgroundColor:"#c3ecec",bodyColor:"#6930c3",titleColor:"#7400b8",titleMarginBottom:10,padding:"10",titleFont:{family:"Lato",size:16},bodyFont:{family:"Lato",size:14},animation:{easing:"easeInOutCirc"},bodyAlign:"right"}}}})};document.addEventListener("DOMContentLoaded",(async function(){try{await t.get("/values").then((e=>{console.log(e.data),b=e.data,b?v=q():h("There was no data received from the backend! ;(")}))}catch(e){console.log(e),h("There was an error while retrieving the values of the chart")}}));const S=document.querySelector(".section__lander"),w=document.querySelector(".section__features"),E=document.querySelector(".section__map"),L=document.querySelector(".section__chart"),k=(document.querySelector(".section__footer"),document.querySelector(".nav__item#features")),C=document.querySelector(".nav__item#map"),T=document.querySelector(".nav__item#chart"),M=document.querySelector(".footer__link#home"),x=document.querySelector(".btn-login"),A=document.querySelector(".footer__link#register"),H=document.querySelector("#login-overlay"),I=document.querySelector("#register-overlay"),N=function(){[H,I].forEach((e=>e.style.display="none"))};exports.hideBoth=N;const $=function(e){e.addEventListener("click",(()=>{const t=[...document.querySelectorAll(".form__input.input-password")];" visibility_off "===e.innerHTML?e.innerHTML=" visibility ":e.innerHTML=" visibility_off ",t.forEach((e=>{"password"===e.type?e.type="text":e.type="password"}))}))};!function(){var e;null===(e=navigator.geolocation)||void 0===e||e.getCurrentPosition(function({coords:e}){const{latitude:t,longitude:a}=e,c=r("mapid").setView([t,a],13);o("https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(c),n([t,a]).addTo(c).bindPopup("This is your current location right now.").openPopup();const i=i([t,a],{color:"#4ea8de",fillColor:"#64dfdf",fillOpacity:.5,radius:500}).addTo(c)}.bind(this),(()=>{alert("We weren't able to access your current location")}),{enableHighAccuracy:!0})}(),function(){const e=function(e,t){e.addEventListener("click",(()=>{t.scrollIntoView()}))};e(k,w),e(C,E),e(T,L),e(M,S)}(),[...document.querySelectorAll("#show-password")].forEach((e=>$(e))),x.addEventListener("click",(()=>{H.style.display="flex"})),A.addEventListener("click",(()=>{I.style.display="flex"})),[...document.querySelectorAll(".close-button")].forEach((e=>e.addEventListener("click",N))),[...document.querySelectorAll(".overlay")].forEach((e=>e.addEventListener("click",N))),window.addEventListener("keyup",(e=>{"Escape"==e.key&&N()}));
//# sourceMappingURL=index.fc9b2e52.js.map
